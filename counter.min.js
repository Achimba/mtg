function playerLayoutDefault(e){for(var n=[null,"100%","50%","33.3%","25%","20%","16.6%","14.28%","12.5%"],t=0;t<e.length;t++)e[t].style.height=n[e.length],e[t].style.display="block"}function playerLayoutHelper(e,n){for(var t=0;t<e.length;t++){var l=e[t].className;e[t].className=l+" "+n[t]}}function playerLayoutTwo(e){e[0].className=e[0].className+" two-t",e[1].className=e[1].className+" two-b"}function playerLayoutThree(e){playerLayoutHelper(e,["four-t-l","four-t-r","four-b-l"])}function playerLayoutFour(e){playerLayoutHelper(e,["four-t-l","four-t-r","four-b-l","four-b-r"])}function playerLayoutFive(e){playerLayoutHelper(e,Array(5).fill("five"))}function playerLayoutSix(e){playerLayoutHelper(e,["six-t-l","six-t-r","six-m-l","six-m-r","six-b-l","six-b-r"])}function playerLayoutSeven(e){playerLayoutHelper(e,Array(7).fill("seven"))}function playerLayoutEight(e){playerLayoutHelper(e,Array(8).fill("eight"))}function setPlayerlayout(){var e=document.getElementsByClassName("active");switch(g_numberPlayers){case 2:playerLayoutTwo(e);break;case 3:playerLayoutThree(e);break;case 4:playerLayoutFour(e);break;case 5:playerLayoutFive(e);break;case 6:playerLayoutSix(e);break;case 7:playerLayoutSeven(e);break;case 8:playerLayoutEight(e);break;default:playerLayoutDefault(e)}}function setStartingLifeTotal(e){for(var n=document.getElementsByClassName("life"),t=0;t<n.length;t++)n[t].innerText=e}function getStartingLifeTotal(e){var n=null;if(null!=e){var t=parseInt(e);n=isNaN(t)?"20":100<t?"100":t<20?"20":e}else{var l=document.getElementById("start_life");null!=(n=l.options[l.selectedIndex].value)&&""!=n||(n="20")}return n}function displayTiles(){for(var e=document.getElementsByClassName("tile"),n=0;n<e.length;n++)e[n].className="tile noise c"+n,animateDead(e[n].children[0]),n<g_numberPlayers?e[n].classList.add("active"):e[n].classList.add("hidden")}"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(function(e){e.installing?console.log("Service worker installing"):e.waiting?console.log("Service worker installed"):e.active&&console.log("Service worker active")}).catch(function(e){console.log("Registration failed with "+e)});var g_numberPlayers=0;function newGame(e){displayTiles(),setStartingLifeTotal(getStartingLifeTotal(e)),setPlayerlayout(),document.getElementById("choose").classList.add("hidden"),document.getElementById("menu_button").classList.remove("hidden"),document.getElementById("play").classList.remove("hidden")}function death(e){e.innerText="",e.classList.add("death"),e.nextElementSibling.children[0].classList.add("hidden"),e.nextElementSibling.children[1].classList.add("hidden"),e.nextElementSibling.children[2].classList.remove("hidden")}function animateDead(e){e.innerText="1",e.classList.remove("death"),e.nextElementSibling.children[0].classList.remove("hidden"),e.nextElementSibling.children[1].classList.remove("hidden"),e.nextElementSibling.children[2].classList.add("hidden")}function displayLife(e,n){n<=0?death(e):e.innerText=n.toString()}function changeLife(e,n){var t=document.getElementById(e),l=t.innerText;displayLife(t,parseInt(l)+parseInt(n))}function plusLife(e){changeLife(e,1)}function minusLife(e){changeLife(e,-1)}function mousedownChangeValue(e){var n=e.dataset.id;e.className.includes("plus")?plusLife(n):e.className.includes("minus")&&minusLife(n)}function toggleFullScreen(){var e=window.document,n=e.documentElement,t=n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen||n.msRequestFullscreen,l=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?l.call(e):t.call(n)}function replay(e){newGame(),closeSlideMenu(e)}function restart(e){document.getElementById("choose").classList.remove("hidden"),document.getElementById("menu_button").classList.add("hidden"),document.getElementById("play").classList.add("hidden"),closeSlideMenu(e)}function getParamAndValidate(e,n,t,l){var a=null,i=e.get(n);if(null!=i){var s=parseInt(i);null==s||isNaN(s)?isNaN(s)&&(s=null):l<(a=s)?a=l:a<t&&(a=t)}return a}function handleQueryString(){var e=new URLSearchParams(location.search);if(null!=e&&(e.has("p")||e.has("l"))){var n=getParamAndValidate(e,"p",2,8),t=getParamAndValidate(e,"l",1,999);null!=n&&(g_numberPlayers=n,null==t&&(t=20),newGame(t))}}function handleSwipeLeft(e){null!=g_slideOutMenu&&g_slideOutMenu.close()}function handleSwipeRight(e){null!=g_slideOutMenu&&g_slideOutMenu.open()}function initTouchyFeelyHandsyStuff(e){var n=new Hammer(e);n.on("swipeleft",function(e){e.preventDefault(),handleSwipeLeft(e)}),n.on("swiperight",function(e){e.preventDefault(),handleSwipeRight(e)})}var g_slideOutMenu=null;function closeSlideMenu(e){e.preventDefault(),null!=g_slideOutMenu&&g_slideOutMenu.close()}window.addEventListener("DOMContentLoaded",function(e){for(var n=document.getElementsByClassName("player-button"),t=0;t<n.length;t++)n[t].addEventListener("click",function(e){g_numberPlayers=parseInt(e.srcElement.value),newGame()},!1);for(var l=["plus","minus"],a=0;a<l.length;a++)for(var i=document.getElementsByClassName(l[a]),s=0;s<i.length;s++){var r=i[s];r.addEventListener("click",function(e){mousedownChangeValue(e.srcElement)},!1),initTouchyFeelyHandsyStuff(r)}for(var u=document.getElementsByClassName("animate"),o=0;o<u.length;o++)u[o].addEventListener("click",function(e){var n=e.srcElement.dataset.id;animateDead(document.getElementById(n))},!1);handleQueryString(),(g_slideOutMenu=new Slideout({panel:document.getElementById("panel"),menu:document.getElementById("menu"),padding:256,tolerance:70})).enableTouch();for(var c=document.getElementsByClassName("toggle-button"),d=0;d<c.length;d++)c[d].addEventListener("click",function(e){g_slideOutMenu.toggle()},!1);g_slideOutMenu.on("beforeopen",function(){this.panel.classList.add("panel-open")}),g_slideOutMenu.on("open",function(){this.panel.addEventListener("click",closeSlideMenu)}),g_slideOutMenu.on("beforeclose",function(){this.panel.classList.remove("panel-open"),this.panel.removeEventListener("click",closeSlideMenu)}),document.getElementById("fullscreen").addEventListener("click",function(e){toggleFullScreen()},!1),document.getElementById("replay").addEventListener("click",function(e){replay(e)},!1),document.getElementById("restart").addEventListener("click",function(e){restart(e)},!1)});