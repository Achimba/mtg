<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Do you play Magic?</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,minimal-ui" />
        <style>
            .hidden { display: none !important; }
            .body { margin: 0px; border: 0px; padding: 0px; width: 100vw; height: 100vh; position: relative; }
            .noselect { -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
            .tile { height: 100%; overflow: hidden; position: relative; font-size: 12vmax; background-image: url(data:image/png;base64,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); }
            .c1 { background-color: #2e86c1; }
            .c2 { background-color: #228B22; }
            .c3 { background-color: #911eb4; }
            .c4 { background-color: #fec007; }
            .c5 { background-color: #2e86c1; }
            .c6 { background-color: #228B22; }
            .c7 { background-color: #911eb4; }
            .c8 { background-color: #fec007; }

            .seven, .eight { display: inline-block !important; float: left; width: 50%; height: 25%; }

            .life { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; padding: 0px 0px 0px 1vw; display: grid; align-items: center; text-align: center; }
            .life.death { background-color: #000000; background-image: url(skull.gif); background-position: center center; background-size: contain; background-repeat: no-repeat; }
            .buttons { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; }
            .plus, .minus { display: inline-block; float: left; height: 100%; width: 50%; border: 0px; background-color: transparent; color: #000000; font-family: monospace; font-size: 8vmax; cursor: pointer; touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }
            .plus { padding: 0px 0px 0px 10px; text-align: left; }
            .minus { padding: 0px 10px 0px 0px; text-align: right; }
            .plus:disabled, .minus:disabled { color: #000000; cursor: default; }
            .animate { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0px; border: 0px; padding: 0px; background-color: transparent; font-size: 0px; cursor: pointer; }


            .commander-damage { width: 100%; height: 100%; background-color: transparent;}
            .commander-damage-total { float: left; height: 18px; color: #ffffff; font-size: 16px; overflow: hidden; text-align: center; }


        </style>
    </head>
    <body class="body noselect">
        <div id="tile1" class="tile c1 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile2" class="tile c2 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile3" class="tile c3 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile4" class="tile c4 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile5" class="tile c5 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile6" class="tile c6 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile7" class="tile c7 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <div id="tile8" class="tile c8 hidden">
            <div class="life"></div>
            <div class="commander-damage"></div>
            <div class="buttons">
                <input type="button" class="plus" value="+" title="+">
                <input type="button" class="minus" value="-" title="-">
                <input type="button" class="animate hidden" title="Animate Dead" value=" ">
            </div>
        </div>
        <script>
            "use strict";

            var gStartingLife = null;
            var gNumberOfPlayers = null;
            var gPlayers = [];

            function getPlayer(playerNumber) {
                if (playerNumber < 1 || gPlayers == null || playerNumber >= gPlayers.length) {
                    return null;
                } else {
                    return gPlayers[playerNumber];
                }
            }

            function getPlayerTile(playerNumber) {
                var player = getPlayer(playerNumber);
                if (player == null) {
                    return null;
                }

                var tile = player.getTile();
                if (tile == null) {
                    return null;
                }

                return tile;
            }

            function getLifeDiv(playerNumber) {
                var tile = getPlayerTile(playerNumber);
                if (tile == null) {
                    return null;
                }

                var lifeDiv = tile.firstElementChild;
                if (lifeDiv == null) {
                    return null;
                }

                return lifeDiv;
            }

            function getCommanderDiv(playerNumber) {
                var lifeDiv = getLifeDiv(playerNumber);
                if (lifeDiv == null) {
                    return null;
                }

                var commanderDiv = lifeDiv.nextElementSibling;
                if (commanderDiv == null) {
                    return null;
                }

                return commanderDiv;
            }

            function getButtonsDiv(playerNumber) {
                var commanderDiv = getCommanderDiv(playerNumber);
                if (commanderDiv == null) {
                    return null;
                }

                var buttonsDiv = commanderDiv.nextElementSibling;
                if (buttonsDiv == null) {
                    return null;
                }

                return buttonsDiv;
            }

            function displayLife(playerNumber, total) {
                var lifeDiv = getLifeDiv(playerNumber);
                if (lifeDiv != null) {
                    lifeDiv.innerText = total.toString();
                }
            }

            function setLifeInternal(current, change) {
                if (current != null && change != null) {
                    var intChange = parseInt(change);
                    if (isNaN(intChange)) {
                        return current;
                    } else {
                        var newTotal = current + intChange;
                        if (newTotal < 0) {
                            return 0;
                        } else if (newTotal > 666) {
                            return 666;
                        } else {
                            return newTotal;
                        }
                    }
                }
            }

            class Player {
                #playerNumber = null;
                #tile = null;
                #life = null;
                #color = null;
                constructor(playerNumber, life, tile, color) {
                    this.#playerNumber = playerNumber;
                    this.#tile = tile;
                    this.#life = life;
                    this.#color = color;
                }

                getPlayerNumber() {
                    return this.#playerNumber;
                }

                getTile() {
                    return this.#tile;
                }

                getLife() {
                    return this.#life;
                }

                setLife(i) {
                    this.#life = setLifeInternal(this.#life, i);
                    displayLife(this.#playerNumber, this.#life);
                }

                getColor() {
                    return this.#color;
                }

                setColor(color) {
                    this.#color = color;
                }
            };

            function createCommanderDamageSwatch(playerNumber) {
                var el = document.createElement("span");
                el.className = "commander-damage-total c" + playerNumber.toString();
                el.innerText = "20";
                el.style.width = 100 / (gNumberOfPlayers-1) + "%";
                el.id = "player" + playerNumber.toString() + "commander";
                return el;
            }

            function initCommanderDamage() {
                for (var i=1; i<gNumberOfPlayers+1; i++) {
                    for (var j=1; j<gNumberOfPlayers+1; j++) {
                        if (i != j) {
                            var damageDiv = getCommanderDiv(i);
                            if (damageDiv != null) {
                                var commanderDamageSwatch = createCommanderDamageSwatch(j);
                                damageDiv.appendChild(commanderDamageSwatch);
                            }
                        }
                    }
                }
            }

            function setStartingLife() {
                var divs = document.getElementsByClassName("life");
                for (var i=0; i<divs.length; i++) {
                    divs[i].innerText = gStartingLife;
                }
            }

            function initPlayers() {
                for (var i=1; i < 9; i++) {
                    var playerTile = document.getElementById("tile" + i.toString());
                    if (playerTile != null) {
                        if (i > gNumberOfPlayers) {
                            playerTile.classList.add("hidden");
                            gPlayers[i] = null;
                        } else {
                            playerTile.classList.remove("hidden");
                            playerTile.classList.add("eight");
                            var player = new Player(i, gStartingLife, playerTile);
                            gPlayers[i] = player;
                        }
                    }
                }
            }

            function beginGame() {
                var startingLife = 40;
                gStartingLife = startingLife;
                var numberOfPlayers = 8;
                gNumberOfPlayers = numberOfPlayers;
                initPlayers();
                initCommanderDamage();
                setStartingLife();
            }

            beginGame();

        </script>
    </body>
</html>
